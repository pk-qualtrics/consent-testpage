<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Ketch Consent Example</title>

  <!-- Your Ketch boot script (unchanged) -->
  <script>
    !function(){
      window.semaphore=window.semaphore||[];
      window.ketch=function(){
        window.semaphore.push(arguments)
      };
      var n=document.createElement("script");
      n.type="text/javascript",
      n.src="https://global.ketchcdn.com/web/v2/config/merkle/website_smart_tag/boot.js",
      n.defer=n.async=!0,
      document.getElementsByTagName("head")[0].appendChild(n)
    }();
  </script>

  <!-- Custom logic triggered after consent -->
  <script>
    function waitForKetch(callback) {
      const interval = setInterval(() => {
        if (typeof window.ketch === 'object' && typeof window.ketch.onConsent === 'function') {
          clearInterval(interval);
          callback(window.ketch);
        }
      }, 100);
    }

    waitForKetch((ketch) => {
      ketch.onConsent((consent) => {
        if (consent?.purposes?.analytics === 'consented') {
          console.log('âœ… User gave consent for analytics');
          // Run your custom logic
          myCustomFunction();
        }
      });
    });

    function myCustomFunction() {
      console.log('ðŸŽ‰ Custom code executed after user consented!');
      // ðŸ‘‰ Place your actual logic here
      // e.g., show a feature, enable a script, start a timer, etc.
    }
  </script>

</head>
<body>
  <h1>Welcome! 3</h1>
</body>
</html>
